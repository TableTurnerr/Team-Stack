<Window x:Class="CallRecorder.App.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="Call Recorder" 
        Height="520" Width="420"
        WindowStartupLocation="CenterScreen"
        Background="#0D0D14"
        ResizeMode="CanMinimize">
    
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="0,0,0,20">
            <TextBlock Text="Call Recorder" 
                       FontSize="24" 
                       FontWeight="Bold" 
                       Foreground="White"/>
            <TextBlock Text="Select a window to monitor for calls" 
                       Style="{StaticResource MutedTextStyle}"
                       Margin="0,4,0,0"/>
        </StackPanel>
        
        <!-- Window Selection -->
        <Border Grid.Row="1" Style="{StaticResource CardStyle}">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <!-- Refresh Header -->
                <DockPanel Grid.Row="0" Margin="0,0,0,12">
                    <TextBlock Text="Available Windows" 
                               Style="{StaticResource HeaderTextStyle}"
                               DockPanel.Dock="Left"/>
                    <Button x:Name="RefreshButton"
                            Content="{materialDesign:PackIcon Kind=Refresh}"
                            Style="{StaticResource MaterialDesignIconButton}"
                            ToolTip="Refresh window list"
                            Click="RefreshButton_Click"
                            HorizontalAlignment="Right"
                            Foreground="#888888"/>
                </DockPanel>
                
                <!-- Window List -->
                <ListBox x:Name="WindowListBox"
                         Grid.Row="1"
                         Background="Transparent"
                         BorderThickness="0"
                         SelectionMode="Single"
                         SelectionChanged="WindowListBox_SelectionChanged">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal" Margin="4">
                                <materialDesign:PackIcon Kind="ApplicationOutline" 
                                                         VerticalAlignment="Center"
                                                         Foreground="#888888"
                                                         Margin="0,0,8,0"/>
                                <StackPanel>
                                    <TextBlock Text="{Binding Title}" 
                                               Foreground="White"
                                               FontSize="13"
                                               TextTrimming="CharacterEllipsis"
                                               MaxWidth="280"/>
                                    <TextBlock Text="{Binding ProcessName}" 
                                               Style="{StaticResource MutedTextStyle}"
                                               FontSize="11"/>
                                </StackPanel>
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
                
                <!-- Filter for Zoom -->
                <StackPanel Grid.Row="2" Orientation="Horizontal" Margin="0,12,0,0">
                    <CheckBox x:Name="ZoomOnlyCheckbox" 
                              Content="Show Zoom windows only"
                              Foreground="#888888"
                              Checked="ZoomOnlyCheckbox_Changed"
                              Unchecked="ZoomOnlyCheckbox_Changed"/>
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- Status & Actions -->
        <StackPanel Grid.Row="2" Margin="0,16,0,0">
            <!-- Status -->
            <Border x:Name="StatusBorder" 
                    Background="#1E1E2E" 
                    CornerRadius="8" 
                    Padding="12" 
                    Margin="0,0,0,12"
                    Visibility="Collapsed">
                <StackPanel Orientation="Horizontal">
                    <Ellipse x:Name="StatusDot" 
                             Width="8" Height="8" 
                             Fill="#888888" 
                             VerticalAlignment="Center"
                             Margin="0,0,8,0"/>
                    <TextBlock x:Name="StatusText" 
                               Text="Ready" 
                               Foreground="White"
                               VerticalAlignment="Center"/>
                </StackPanel>
            </Border>
            
            <!-- Start Button -->
            <Button x:Name="StartButton"
                    Content="Start Monitoring"
                    Style="{StaticResource AccentButtonStyle}"
                    Click="StartButton_Click"
                    IsEnabled="False"/>
            
            <!-- Debug Output -->
            <Expander Header="Debug Output" 
                      Margin="0,12,0,0"
                      Foreground="#888888">
                <TextBox x:Name="DebugTextBox"
                         Height="100"
                         IsReadOnly="True"
                         Background="#0D0D14"
                         Foreground="#888888"
                         BorderThickness="0"
                         TextWrapping="Wrap"
                         VerticalScrollBarVisibility="Auto"
                         FontFamily="Consolas"
                         FontSize="11"/>
            </Expander>
        </StackPanel>
    </Grid>
</Window>
